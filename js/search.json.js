!function(){var e,t,n,i=document.getElementById("search-key"),s=(document.getElementById("search-form"),document.getElementById("result-wrap")),o=document.getElementById("result-mask"),r=document.getElementById("search-result"),a=document.getElementById("search-tpl").innerHTML;function c(e,t){return t.lastIndex=0,t.test(e)}function u(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function d(e,t){u(e,t)||(e.className+=" "+t)}function l(e,t){if(u(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}}function f(e){var t=this.value.trim();if(t){var u=new RegExp(t.replace(/[ ]/g,"|"),"gmi");!function(e){if(n)e(n);else{var t=new XMLHttpRequest;t.open("GET","/content.json",!0),t.onload=function(){if(this.status>=200&&this.status<300){var t=JSON.parse(this.response||this.responseText);n=t instanceof Array?t:t.posts,e(n)}else console.error(this.statusText)},t.onerror=function(){console.error(this.statusText)},t.send()}}((function(e){!function(e){var t="";t=e.length?e.map((function(e){return function(e,t){return e.replace(/\{\w+\}/g,(function(e){var n=e.replace(/\{|\}/g,"");return t[n]||""}))}(a,{title:e.title,path:e.path,date:new Date(e.date).toLocaleDateString(),tags:e.tags.map((function(e){return"<span>"+e.name+"</span>"})).join("")})})).join(""):'<div class="tips"><i class="fa fa-empty"></i><p>Results not found!</p></div>',r.innerHTML=t}(e.filter((function(e){return function(e,t){return c(e.title,t)||e.tags.some((function(e){return c(e.name,t)}))||c(e.text,t)}(e,u)})))})),e.preventDefault(),l(s,"hide"),l(o,"hide"),i.onfocus=function(){l(s,"hide"),l(o,"hide")}}}window.innerWidth?e=parseInt(window.innerWidth):document.body&&document.body.clientWidth&&(e=parseInt(document.body.clientWidth)),window.innerHeight?t=parseInt(window.innerHeight):document.body&&document.body.clientHeight&&(t=parseInt(document.body.clientHeight)),o.style.width=e+"px",o.style.height=t+"px",i.onfocus=function(){i.addEventListener("input",f)},o.onclick=function(){d(s,"hide"),d(o,"hide")}}();